// Smart Mall Navigator - Frontend only simulation
// Run locally by opening index.html


// Data model (initial items)
const ITEMS = [
{ id: 'Apples', name: 'Apples', brand: 'Local', rate: 120, unit: 'kg', discount: 0, floor: 'ground', desc:'Fresh red apples'},
{ id: 'Oranges', name: 'Oranges', brand: 'CitrusCo', rate: 90, unit: 'kg', discount: 5, floor: 'ground', desc:'Juicy oranges'},
{ id: 'Jeans', name: "Levi's Jeans", brand: "Levi's", rate: 2499, unit: 'piece', discount: 10, floor: 'first', desc:'Slim fit jeans'},
{ id: 'Shoes', name: 'Nike Shoes', brand: 'Nike', rate: 4299, unit: 'pair', discount: 15, floor: 'first', desc:'Running shoes'},
{ id: 'TV', name: 'Samsung Smart TV', brand: 'Samsung', rate: 45999, unit: 'piece', discount: 8, floor: 'second', desc:'4K Smart TV'},
{ id: 'Fridge', name: 'LG Refrigerator', brand: 'LG', rate: 32499, unit: 'piece', discount: 12, floor: 'second', desc:'Double door fridge'}
];


// App state
let state = {
lang: 'en',
floor: 'ground',
items: [...ITEMS],
cart: [],
multiSelect: false,
shopkeeperMode: false,
shopperPos: {x:8, y:72}, // percent
destination: null
};


// DOM refs
const itemsContainer = document.getElementById('itemsContainer');
const cartItems = document.getElementById('cartItems');
const totalLabel = document.getElementById('totalLabel');
const floorSelect = document.getElementById('floorSelect');
const shopper = document.getElementById('shopper');
const pathLine = document.getElementById('pathLine');
const pathSvg = document.getElementById('pathSvg');
const infoModal = document.getElementById('infoModal');
const modalText = document.getElementById('modalText');
const langSelect = document.getElementById('langSelect');
const voiceToggle = document.getElementById('voiceToggle');
const shopkeeperModeToggle = document.getElementById('shopkeeperMode');
const shopkeeperPanel = document.getElementById('shopkeeperPanel');
const liveLocation = document.getElementById('liveLocation');
const destinationInfo = document.getElementById('destinationInfo');


// Texts (English + Kannada)
const T = {
en: {
items: 'Items', cart: 'Cart', total: 'Total', pay: 'Pay', selectFloor: 'Select Floor', destinationReached: 'You have reached the destination!',
added: 'Added to cart', pleaseSelect: 'Please select an item and floor!', facilities: 'Facilities', washroom: 'Washroom', office: 'Mall Office'
},
kn: {
items: 'ವಸ್ತುಗಳು', cart: 'ಕಾರ್ಟ್', total: 'ಒಟ್ಟು', pay: 'ಪಾವತಿಸಿ', selectFloor: 'ಮಾಳಿಗೆಯ ಮೆಟ್ಟಲು ಆಯ್ಕೆಮಾಡಿ', destinationReached: 'ನೀವು ಗುರಿಯನ್ನು ತಲುಪಿದ್ದೀರಿ!',
added: 'ಕಾರ್ಟ್‌ಗೆ ಸೇರಿಸಿದೆ', pleaseSelect: 'ದಯವಿಟ್ಟು ವಸ್ತು ಮತ್ತು ಮಹಡಿಯನ್ನು ಆಯ್ಕೆಮಾಡಿ!', facilities: 'ಸೌಕರ್ಯಗಳು', washroom: 'ಶೌಚಾಲಯ', office: 'ಮಾಲ್ ಕಚೇರಿ'
}
};


// Speech helper
function speak(msg){
if (voiceToggle.checked && 'speechSynthesis' in window){
const u = new SpeechSynthesisUtterance(ms
