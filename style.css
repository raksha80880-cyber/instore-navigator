<div class="floor-selector">
  <label for="itemSelect">Choose Item:</label>
  <select id="itemSelect">
    <option disabled selected>Select an Item</option>
    <optgroup label="Ground Floor">
      <option value="Apples">Apples (â‚¹120/kg)</option>
      <option value="Oranges">Oranges (â‚¹90/kg)</option>
    </optgroup>
    <optgroup label="First Floor">
      <option value="Jeans">Leviâ€™s Jeans (â‚¹2,499)</option>
      <option value="Shoes">Nike Shoes (â‚¹4,299)</option>
    </optgroup>
    <optgroup label="Second Floor">
      <option value="TV">Samsung Smart TV (â‚¹45,999)</option>
      <option value="Fridge">LG Refrigerator (â‚¹32,499)</option>
    </optgroup>
  </select>
  <button id="navigateBtn" style="margin-left:10px; padding:0.5rem 1rem; background:#7b1fa2; color:white; border:none; border-radius:8px;">Start Navigation</button>
</div>

<!-- Modal -->
<div class="modal" id="infoModal">
  <div class="modal-content">
    <h2>Destination Reached ðŸŽ¯</h2>
    <p id="modalText">You have arrived at your selected item!</p>
    <button onclick="closeModal()">Close</button>
  </div>
</div>

<footer>Â© 2025 Smart Mall Navigator | Voice + Route + Multi-Floor Navigation</footer>

<script>
const shopper = document.getElementById('shopper');
const path = document.getElementById('path');
const modal = document.getElementById('infoModal');
const voiceToggle = document.getElementById('voiceToggle');

let voiceEnabled = false;
voiceToggle.addEventListener('change', () => {
  voiceEnabled = voiceToggle.checked;
  speak(voiceEnabled ? "Voice navigation activated." : "Voice navigation off.");
});

function speak(msg) {
  if ('speechSynthesis' in window) {
    const utter = new SpeechSynthesisUtterance(msg);
    utter.lang = "en-IN";
    speechSynthesis.speak(utter);
  }
}

function openModal() {
  modal.classList.add("is-open");
  document.body.classList.add("modal-open");
}
function closeModal() {
  modal.classList.remove("is-open");
  document.body.classList.remove("modal-open");
}

document.getElementById("navigateBtn").addEventListener("click", () => {
  const item = document.getElementById("itemSelect").value;
  const floor = document.getElementById("floor").value;
  if (!item) return alert("Please select an item!");

  speak(Navigating to ${item} on ${floor}. Please follow the route.);

  // Reset
  path.style.width = "0";
  shopper.style.left = "10%";
  shopper.style.top = "50%";

  // Animate path
  setTimeout(() => {
    path.style.width = "70%";
    shopper.style.left = "80%";
    shopper.style.top = "50%";
  }, 500);

  // End navigation
  setTimeout(() => {
    speak(You have reached the ${item} section on the ${floor}.);
    openModal();
  }, 3000);
});
</script>
</body>
</html>
