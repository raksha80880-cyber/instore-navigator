<!-- Modal -->
<div class="modal" id="infoModal">
  <div class="modal-content">
    <h2>Destination Reached ðŸŽ¯</h2>
    <p id="modalText">You have arrived at your selected item!</p>
    <button onclick="closeModal()">Close</button>
  </div>
</div>

<footer>Â© 2025 Smart Mall Navigator | Voice + Route + Multi-Floor Navigation</footer>

<script>
const shopper = document.getElementById('shopper');
const path = document.getElementById('path');
const modal = document.getElementById('infoModal');
const voiceToggle = document.getElementById('voiceToggle');

let voiceEnabled = false;
voiceToggle.addEventListener('change', () => {
  voiceEnabled = voiceToggle.checked;
  speak(voiceEnabled ? "Voice navigation activated." : "Voice navigation off.");
});

function speak(msg) {
  if ('speechSynthesis' in window) {
    const utter = new SpeechSynthesisUtterance(msg);
    utter.lang = "en-IN";
    speechSynthesis.speak(utter);
  }
}

function openModal() {
  modal.classList.add("is-open");
  document.body.classList.add("modal-open");
}
function closeModal() {
  modal.classList.remove("is-open");
  document.body.classList.remove("modal-open");
}

document.getElementById("navigateBtn").addEventListener("click", () => {
  const item = document.getElementById("itemSelect").value;
  const floor = document.getElementById("floor").value;
  if (!item) return alert("Please select an item!");

  speak(Navigating to ${item} on ${floor}. Please follow the route.);

  // Reset
  path.style.width = "0";
  shopper.style.left = "10%";
  shopper.style.top = "50%";

  // Animate path
  setTimeout(() => {
    path.style.width = "70%";
    shopper.style.left = "80%";
    shopper.style.top = "50%";
  }, 500);

  // End navigation
  setTimeout(() => {
    speak(You have reached the ${item} section on the ${floor}.);
    openModal();
  }, 3000);
});
</script>
</body>
</html>
